# üç™ GeoConsent

<p align="center">
  <img src="https://img.shields.io/badge/version-2.0.0-c8f135?style=flat-square" alt="version"/>
  <img src="https://img.shields.io/badge/license-MIT-c8f135?style=flat-square" alt="license"/>
  <img src="https://img.shields.io/badge/dependencies-0-c8f135?style=flat-square" alt="zero dependencies"/>
  <img src="https://img.shields.io/badge/size-~7kb-c8f135?style=flat-square" alt="size"/>
</p>

<p align="center">
  <b>RU</b> ¬∑ <a href="#english">EN</a>
</p>

---

–£–º–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ cookie-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π, –∫–æ—Ç–æ—Ä–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ä–µ–≥–∏–æ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ ‚Äî –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º **152-–§–ó** –¥–ª—è –†–æ—Å—Å–∏–∏, **GDPR** –¥–ª—è –ï–≤—Ä–æ–ø—ã, **CCPA** –¥–ª—è –°–®–ê. –û–¥–∏–Ω —Ñ–∞–π–ª, –Ω–æ–ª—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.

```html
<!-- –í—Å—ë, —á—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è -->
<script src="cookie-consent.js"></script>
```

---

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç](#–∫–∞–∫-—ç—Ç–æ-—Ä–∞–±–æ—Ç–∞–µ—Ç)
- [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
- [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è](#–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
- [–ü—É–±–ª–∏—á–Ω–æ–µ API](#–ø—É–±–ª–∏—á–Ω–æ–µ-api)
- [–†–µ–≥–∏–æ–Ω—ã –∏ —Å–æ–æ–±—â–µ–Ω–∏—è](#—Ä–µ–≥–∏–æ–Ω—ã-–∏-—Å–æ–æ–±—â–µ–Ω–∏—è)
- [–ê–≤—Ç–æ–ø—Ä–∏–Ω—è—Ç–∏–µ](#–∞–≤—Ç–æ–ø—Ä–∏–Ω—è—Ç–∏–µ)
- [–ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–æ–≤](#–∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è-—Ç–µ–∫—Å—Ç–æ–≤)
- [–î–µ–º–æ-–∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä](#–¥–µ–º–æ-–∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä)
- [–°–æ–±—ã—Ç–∏—è](#—Å–æ–±—ã—Ç–∏—è)
- [–ü—Ä–∞–≤–æ–≤–æ–π –∫–æ–Ω—Ç–µ–∫—Å—Ç](#–ø—Ä–∞–≤–æ–≤–æ–π-–∫–æ–Ω—Ç–µ–∫—Å—Ç)
- [–õ–∏—Ü–µ–Ω–∑–∏—è](#–ª–∏—Ü–µ–Ω–∑–∏—è)

---

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞—Ö–æ–¥–∏—Ç –Ω–∞ —Å–∞–π—Ç
        ‚îÇ
        ‚ñº
–£–∂–µ –æ—Ç–≤–µ—á–∞–ª? ‚îÄ‚îÄ–¥–∞‚îÄ‚îÄ‚ñ∂ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º
        ‚îÇ
       –Ω–µ—Ç
        ‚îÇ
        ‚ñº
–ó–∞–ø—Ä–æ—Å –∫ ipapi.co (IP-–≥–µ–æ–ª–æ–∫–∞—Ü–∏—è)
        ‚îÇ
   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îê
—É—Å–ø–µ—Ö      –æ—à–∏–±–∫–∞
   ‚îÇ           ‚îÇ
   ‚ñº           ‚ñº
–°—Ç—Ä–∞–Ω–∞      Timezone
–ø–æ IP       –ø–æ Intl API
   ‚îÇ           ‚îÇ
   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        ‚îÇ
        ‚ñº
  –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ä–µ–≥–∏–æ–Ω:
  RU/–°–ù–ì ‚Üí 152-–§–ó –±–∞–Ω–Ω–µ—Ä
  EU/EEA  ‚Üí GDPR –±–∞–Ω–Ω–µ—Ä
  US/CA   ‚Üí CCPA –±–∞–Ω–Ω–µ—Ä
  CN      ‚Üí –∫–∏—Ç–∞–π—Å–∫–∏–π –±–∞–Ω–Ω–µ—Ä
  other   ‚Üí –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π –±–∞–Ω–Ω–µ—Ä
        ‚îÇ
        ‚ñº
–ü–æ–∫–∞–∑—ã–≤–∞–µ–º —á–µ—Ä–µ–∑ 800–º—Å
(–ø–ª–∞–≤–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è —Å–Ω–∏–∑—É)
```

–û—Ç–≤–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `localStorage` (—Ñ–æ–ª–ª–±—ç–∫ ‚Äî –≤ `cookie`) –∏ –æ—Å—Ç–∞—ë—Ç—Å—è –Ω–∞ **–≥–æ–¥**. –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –ø–æ–∫–∞–∑ –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç.

---

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

```html
<script src="cookie-consent.js"></script>
```

–í—Å—ë. –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç —Ä–µ–≥–∏–æ–Ω –∏ –ø–æ–∫–∞–∂–µ—Ç –Ω—É–∂–Ω—ã–π –±–∞–Ω–Ω–µ—Ä —Å–∞–º–∞.

### –° –∫–∞—Å—Ç–æ–º–Ω—ã–º –∫–æ–Ω—Ñ–∏–≥–æ–º

–û–±—ä–µ–∫—Ç `window.GeoConsentConfig` –Ω—É–∂–Ω–æ –æ–±—ä—è–≤–∏—Ç—å **–¥–æ** –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Å–∫—Ä–∏–ø—Ç–∞:

```html
<script>
  window.GeoConsentConfig = {
    autoHide:    5000,           // –∞–≤—Ç–æ–ø—Ä–∏–Ω—è—Ç–∏–µ —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
    theme:       'light',        // —Å–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞
    accentColor: '#ff6b2b',      // –æ—Ä–∞–Ω–∂–µ–≤—ã–π –∞–∫—Ü–µ–Ω—Ç
    position:    'bottom-left',  // –ª–µ–≤—ã–π –Ω–∏–∂–Ω–∏–π —É–≥–æ–ª
    privacyUrl:  '/privacy',     // —Å—Å—ã–ª–∫–∞ –Ω–∞ –ø–æ–ª–∏—Ç–∏–∫—É
  };
</script>
<script src="cookie-consent.js"></script>
```

---

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–∏–ø | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–ø–∏—Å–∞–Ω–∏–µ |
|---|---|---|---|
| `autoHide` | `false \| true \| number` | `null` | –ê–≤—Ç–æ–ø—Ä–∏–Ω—è—Ç–∏–µ: `false` ‚Äî –≤—ã–∫–ª, `true` ‚Äî –¥–µ—Ñ–æ–ª—Ç —Ä–µ–≥–∏–æ–Ω–∞, —á–∏—Å–ª–æ ‚Äî –∑–∞–¥–µ—Ä–∂–∫–∞ –≤ –º—Å |
| `theme` | `'dark' \| 'light'` | `'dark'` | –¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞ |
| `accentColor` | `string` | `'#c8f135'` | –ê–∫—Ü–µ–Ω—Ç–Ω—ã–π —Ü–≤–µ—Ç (–ª—é–±–æ–π CSS HEX). –¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ –Ω–∞ –∫–Ω–æ–ø–∫–µ –ø–æ–¥–±–∏—Ä–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ |
| `position` | `string` | `'bottom-right'` | –ü–æ–∑–∏—Ü–∏—è: `'bottom-right'`, `'bottom-left'`, `'bottom-center'` |
| `privacyUrl` | `string` | `'/privacy'` | URL —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø–æ–ª–∏—Ç–∏–∫–∏ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏ |
| `messages` | `object` | `{}` | –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–æ–≤ –ø–æ —Ä–µ–≥–∏–æ–Ω–∞–º (—Å–º. –Ω–∏–∂–µ) |

---

## –ü—É–±–ª–∏—á–Ω–æ–µ API

–ü–æ—Å–ª–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Å–∫—Ä–∏–ø—Ç–∞ –¥–æ—Å—Ç—É–ø–µ–Ω –≥–ª–æ–±–∞–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç `window.GeoConsent`:

```js
// –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å –±–∞–Ω–Ω–µ—Ä –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ä–µ–≥–∏–æ–Ω–∞ (—É–¥–æ–±–Ω–æ –¥–ª—è —Ç–µ—Å—Ç–æ–≤)
GeoConsent.show('eu');
GeoConsent.show('ru');
GeoConsent.show('us');

// –°–±—Ä–æ—Å–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç (–±–∞–Ω–Ω–µ—Ä –ø–æ–∫–∞–∂–µ—Ç—Å—è —Å–Ω–æ–≤–∞ –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º init)
GeoConsent.reset();

// –ü–æ–ª—É—á–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
var answer = GeoConsent.getAnswer();
// ‚Üí { choice: "accepted", ts: 1709123456789 }
// ‚Üí null, –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –µ—â—ë –Ω–µ –æ—Ç–≤–µ—á–∞–ª

// –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ä–µ–≥–∏–æ–Ω –±–µ–∑ –ø–æ–∫–∞–∑–∞ –±–∞–Ω–Ω–µ—Ä–∞
GeoConsent.detectRegion().then(function(region) {
  console.log(region); // 'ru' | 'eu' | 'us' | 'cn' | 'default'
});

// –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥ –≤ —Ä–∞–Ω—Ç–∞–π–º–µ (–¥–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ show)
GeoConsent.configure({
  accentColor: '#00d4ff',
  theme: 'light',
});

// –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Ä—É—á–Ω—É—é (–µ—Å–ª–∏ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ –Ω–µ –Ω—É–∂–µ–Ω ‚Äî —Å–º. –Ω–∏–∂–µ)
GeoConsent.init();
```

### –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å –º–æ–º–µ–Ω—Ç–æ–º –ø–æ–∫–∞–∑–∞ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ, –¥–æ–±–∞–≤—å—Ç–µ —Ñ–ª–∞–≥ –¥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Å–∫—Ä–∏–ø—Ç–∞:

```html
<script>
  window.GeoConsentConfig = { autoInit: false };
</script>
<script src="cookie-consent.js"></script>

<script>
  // –ù–∞–ø—Ä–∏–º–µ—Ä, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ CMP –∏–ª–∏ A/B-—Ç–µ—Å—Ç–∞
  someAsyncSetup().then(function() {
    GeoConsent.init();
  });
</script>
```

---

## –†–µ–≥–∏–æ–Ω—ã –∏ —Å–æ–æ–±—â–µ–Ω–∏—è

| –†–µ–≥–∏–æ–Ω | –û—Ö–≤–∞—Ç—ã–≤–∞–µ–º—ã–µ —Å—Ç—Ä–∞–Ω—ã | –¢–∏–ø –±–∞–Ω–Ω–µ—Ä–∞ | –ê–≤—Ç–æ–ø—Ä–∏–Ω—è—Ç–∏–µ |
|---|---|---|---|
| `ru` | –†–æ—Å—Å–∏—è, –ë–µ–ª–∞—Ä—É—Å—å, –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω, –£–∑–±–µ–∫–∏—Å—Ç–∞–Ω –∏ –µ—â—ë 8 —Å—Ç—Ä–∞–Ω | –ü—Ä–æ—Å—Ç–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ (152-–§–ó) | 8 —Å–µ–∫ |
| `eu` | 30 —Å—Ç—Ä–∞–Ω –ï–° + –ï–≠–ó + –í–µ–ª–∏–∫–æ–±—Ä–∏—Ç–∞–Ω–∏—è | GDPR —Å –∫–Ω–æ–ø–∫–æ–π ¬´–¢–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ¬ª | –ù–µ—Ç |
| `us` | –°–®–ê, –ö–∞–Ω–∞–¥–∞ | CCPA —Å –∫–Ω–æ–ø–∫–æ–π ¬´Do Not Sell My Info¬ª | –ù–µ—Ç |
| `cn` | –ö–∏—Ç–∞–π | –ü—Ä–æ—Å—Ç–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ (–Ω–∞ –∫–∏—Ç–∞–π—Å–∫–æ–º) | 8 —Å–µ–∫ |
| `default` | –í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ | –ù–µ–π—Ç—Ä–∞–ª—å–Ω—ã–π –∞–Ω–≥–ª–∏–π—Å–∫–∏–π | –ù–µ—Ç |

### –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–µ–≥–∏–æ–Ω–∞

–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: **IP-–≥–µ–æ–ª–æ–∫–∞—Ü–∏—è** (—á–µ—Ä–µ–∑ `ipapi.co`) ‚Üí **—á–∞—Å–æ–≤–æ–π –ø–æ—è—Å** (`Intl.DateTimeFormat`) ‚Üí –¥–µ—Ñ–æ–ª—Ç.

–§–æ–ª–ª–±—ç–∫ –ø–æ —á–∞—Å–æ–≤–æ–º—É –ø–æ—è—Å—É –ø–æ–∫—Ä—ã–≤–∞–µ—Ç ~50 —Ç–∞–π–º–∑–æ–Ω –∏ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç —Å–µ—Ç–∏ ‚Äî –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤—Å–µ–≥–¥–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –º–≥–Ω–æ–≤–µ–Ω–Ω–æ, –¥–∞–∂–µ –µ—Å–ª–∏ `ipapi.co` –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω.

---

## –ê–≤—Ç–æ–ø—Ä–∏–Ω—è—Ç–∏–µ

–ê–≤—Ç–æ–ø—Ä–∏–Ω—è—Ç–∏–µ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –±–∞–Ω–Ω–µ—Ä –∑–∞–∫—Ä–æ–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ –∑–∞–¥–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è, –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–∂–∞–ª –Ω–∏ –æ–¥–Ω—É –∫–Ω–æ–ø–∫—É. –û—Ç–≤–µ—Ç –±—É–¥–µ—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω –∫–∞–∫ `"auto-accepted"`.

```js
window.GeoConsentConfig = {
  autoHide: false,    // –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ç–∫–ª—é—á–∏—Ç—å –¥–ª—è –≤—Å–µ—Ö —Ä–µ–≥–∏–æ–Ω–æ–≤
  autoHide: true,     // –≤–∫–ª—é—á–∏—Ç—å —Å –¥–µ—Ñ–æ–ª—Ç–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π –∫–∞–∂–¥–æ–≥–æ —Ä–µ–≥–∏–æ–Ω–∞
  autoHide: 10000,    // –≤–∫–ª—é—á–∏—Ç—å —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π 10 —Å–µ–∫—É–Ω–¥ –¥–ª—è –≤—Å–µ—Ö —Ä–µ–≥–∏–æ–Ω–æ–≤
};
```

> **–ü—Ä–∞–≤–æ–≤–æ–µ –∑–∞–º–µ—á–∞–Ω–∏–µ.** –ê–≤—Ç–æ–ø—Ä–∏–Ω—è—Ç–∏–µ —Ñ–æ—Ä–º–∞–ª—å–Ω–æ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—Ç –ø—Ä–∏–Ω—Ü–∏–ø—É ¬´–∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∏ —Å–æ–∑–Ω–∞—Ç–µ–ª—å–Ω–æ–≥–æ —Å–æ–≥–ª–∞—Å–∏—è¬ª 152-–§–ó –∏ GDPR, –µ—Å–ª–∏ –∫—É–∫–∏ —Å–æ–¥–µ—Ä–∂–∞—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ. –î–ª—è RU-—Ä–µ–≥–∏–æ–Ω–∞ —Ä–∏—Å–∫–∏ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –Ω—É–ª–µ–≤—ã–µ (—à—Ç—Ä–∞—Ñ—ã –†–ö–ù –Ω–µ–≤—ã—Å–æ–∫–∏, –ø—Ä–µ—Ü–µ–¥–µ–Ω—Ç–æ–≤ –∑–∞ –∫—É–∫–∏-–±–∞–Ω–Ω–µ—Ä—ã –ø–æ—á—Ç–∏ –Ω–µ—Ç). –î–ª—è EU-—Ä–µ–≥–∏–æ–Ω–∞ –∞–≤—Ç–æ–ø—Ä–∏–Ω—è—Ç–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é **–æ—Ç–∫–ª—é—á–µ–Ω–æ** ‚Äî –Ω–µ –≤–∫–ª—é—á–∞–π—Ç–µ –µ–≥–æ –±–µ–∑ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ —Å —é—Ä–∏—Å—Ç–æ–º.

---

## –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–æ–≤

–õ—é–±–æ–π —Ä–µ–≥–∏–æ–Ω –º–æ–∂–Ω–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —á–µ—Ä–µ–∑ `messages`:

```js
window.GeoConsentConfig = {
  messages: {
    ru: {
      title:      '–ú—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º cookies',
      message:    '–ß—Ç–æ–±—ã —Å–∞–π—Ç —Ä–∞–±–æ—Ç–∞–ª –ª—É—á—à–µ. <a href="/privacy">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</a>.',
      btnAccept:  '–û–∫, –ø–æ–Ω—è—Ç–Ω–æ',
      btnDecline: '–ù–µ—Ç, —Å–ø–∞—Å–∏–±–æ',  // null ‚Äî —Å–∫—Ä—ã—Ç—å –∫–Ω–æ–ø–∫—É –æ—Ç–∫–∞–∑–∞
    },
    eu: {
      btnAccept: 'Accept all cookies',
    },
  }
};
```

–ú–æ–∂–Ω–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è—Ç—å –∫–∞–∫ –≤—Å–µ –ø–æ–ª—è —Å—Ä–∞–∑—É, —Ç–∞–∫ –∏ —Ç–æ–ª—å–∫–æ –æ—Ç–¥–µ–ª—å–Ω—ã–µ ‚Äî –æ—Å—Ç–∞–ª—å–Ω—ã–µ –≤–æ–∑—å–º—É—Ç—Å—è –∏–∑ –¥–µ—Ñ–æ–ª—Ç–æ–≤.

–í –ø–æ–ª—è—Ö `message` –∏ `detail` –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è HTML –∏ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä `{privacyUrl}`, –∫–æ—Ç–æ—Ä—ã–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞:

```js
message: '–ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –≤ <a href="{privacyUrl}">–ø–æ–ª–∏—Ç–∏–∫–µ</a>.'
```

---

## –î–µ–º–æ-–∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä

–í –∫–æ–º–ø–ª–µ–∫—Ç–µ –∏–¥—ë—Ç —Ñ–∞–π–ª `cookie-consent-demo.html` ‚Äî –≤–∏–∑—É–∞–ª—å–Ω—ã–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∫–æ–¥–∞ –≤—Å—Ç–∞–≤–∫–∏.

**–ß—Ç–æ —É–º–µ–µ—Ç:**
- –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –ø—Ä–µ–≤—å—é –±–∞–Ω–Ω–µ—Ä–∞ –≤ –º–æ–∫-–±—Ä–∞—É–∑–µ—Ä–µ –ø—Ä–∏ –ª—é–±–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫
- –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É —Ä–µ–≥–∏–æ–Ω–∞–º–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–µ–∫—Å—Ç–æ–≤
- –í–∫–ª—é—á–µ–Ω–∏–µ/–≤—ã–∫–ª—é—á–µ–Ω–∏–µ –∞–≤—Ç–æ–ø—Ä–∏–Ω—è—Ç–∏—è + —Å–ª–∞–π–¥–µ—Ä –∑–∞–¥–µ—Ä–∂–∫–∏
- –í—ã–±–æ—Ä —Ç–µ–º—ã (—Å–≤–µ—Ç–ª–∞—è/—Ç—ë–º–Ω–∞—è)
- 6 —Ü–≤–µ—Ç–æ–≤—ã—Ö –ø—Ä–µ—Å–µ—Ç–æ–≤ + color picker + –≤–≤–æ–¥ HEX –≤—Ä—É—á–Ω—É—é
- 3 –ø–æ–∑–∏—Ü–∏–∏ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏—è
- –í–≤–æ–¥ URL –ø–æ–ª–∏—Ç–∏–∫–∏ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏
- –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–¥–∞ –≤—Å—Ç–∞–≤–∫–∏ —Å –∫–Ω–æ–ø–∫–æ–π ¬´–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å¬ª

–û—Ç–∫—Ä—ã—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ: –ø—Ä–æ—Å—Ç–æ –æ—Ç–∫—Ä–æ–π—Ç–µ `cookie-consent-demo.html` –≤ –±—Ä–∞—É–∑–µ—Ä–µ. –û–±–∞ —Ñ–∞–π–ª–∞ –¥–æ–ª–∂–Ω—ã –ª–µ–∂–∞—Ç—å —Ä—è–¥–æ–º.

---

## –°–æ–±—ã—Ç–∏—è

–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–∏—Å–ø–∞—Ç—á–∏—Ç –∫–∞—Å—Ç–æ–º–Ω–æ–µ —Å–æ–±—ã—Ç–∏–µ –Ω–∞ `window` –ø—Ä–∏ –ª—é–±–æ–º –æ—Ç–≤–µ—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:

```js
window.addEventListener('geoconsent:answer', function(event) {
  console.log(event.detail.choice);
  // 'accepted'       ‚Äî –Ω–∞–∂–∞–ª –æ—Å–Ω–æ–≤–Ω—É—é –∫–Ω–æ–ø–∫—É
  // 'declined'       ‚Äî –Ω–∞–∂–∞–ª –∫–Ω–æ–ø–∫—É –æ—Ç–∫–∞–∑–∞
  // 'auto-accepted'  ‚Äî –±–∞–Ω–Ω–µ—Ä –∑–∞–∫—Ä—ã–ª—Å—è –ø–æ —Ç–∞–π–º–µ—Ä—É
});
```

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–æ —Å–æ–±—ã—Ç–∏–µ –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π –∏–ª–∏ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–æ–π —Ç—Ä–µ–∫–µ—Ä–æ–≤:

```js
window.addEventListener('geoconsent:answer', function(e) {
  if (e.detail.choice === 'accepted') {
    // –ó–∞–≥—Ä—É–∂–∞–µ–º Google Analytics, –ø–∏–∫—Å–µ–ª–∏ –∏ —Ç.–¥.
    loadAnalytics();
  }
});
```

---

## –ü—Ä–∞–≤–æ–≤–æ–π –∫–æ–Ω—Ç–µ–∫—Å—Ç

| –†–µ–≥–∏–æ–Ω | –†–µ–≥—É–ª—è—Ç–æ—Ä | –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ | –†–∏—Å–∫ –∞–≤—Ç–æ–ø—Ä–∏–Ω—è—Ç–∏—è |
|---|---|---|---|
| üá∑üá∫ –†–æ—Å—Å–∏—è | –†–ö–ù, 152-–§–ó | –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –æ–±—Ä–∞–±–æ—Ç–∫–µ –ü–î–Ω | –ù–∏–∑–∫–∏–π (—à—Ç—Ä–∞—Ñ—ã –¥–æ 300–∫ ‚ÇΩ, –ø—Ä–µ—Ü–µ–¥–µ–Ω—Ç–æ–≤ –º–∞–ª–æ) |
| üá™üá∫ –ï–≤—Ä–æ–ø–∞ | DPA, GDPR | –Ø–≤–Ω–æ–µ –∏–Ω—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–æ–≥–ª–∞—Å–∏–µ | –í—ã—Å–æ–∫–∏–π (–¥–æ 4% –æ—Ç –æ–±–æ—Ä–æ—Ç–∞) |
| üá∫üá∏ –°–®–ê | FTC, CCPA | –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ + –ø—Ä–∞–≤–æ –Ω–∞ –æ—Ç–∫–∞–∑ –æ—Ç –ø—Ä–æ–¥–∞–∂–∏ –¥–∞–Ω–Ω—ã—Ö | –°—Ä–µ–¥–Ω–∏–π (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç —à—Ç–∞—Ç–∞) |
| üá®üá≥ –ö–∏—Ç–∞–π | CAC, PIPL | –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ | –ù–∏–∑–∫–∏–π |

–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ç–µ—Ö–Ω–∏—á–µ—Å–∫—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é ‚Äî —é—Ä–∏–¥–∏—á–µ—Å–∫—É—é –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –Ω–µ—Å—ë—Ç –≤–ª–∞–¥–µ–ª–µ—Ü —Å–∞–π—Ç–∞. –ü—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≥—Ä–∞–∂–¥–∞–Ω –ï–° —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è —Å —é—Ä–∏—Å—Ç–æ–º.

---

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT ¬© 2026

---
---

<a name="english"></a>

# üç™ GeoConsent

<p align="center">
  <a href="#-geoconsent">RU</a> ¬∑ <b>EN</b>
</p>

A smart cookie consent library that automatically detects the user's region and shows the appropriate notice ‚Äî following **Russian 152-FZ** requirements, **GDPR** for Europe, and **CCPA** for the US. Single file, zero dependencies.

```html
<!-- Everything you need -->
<script src="cookie-consent.js"></script>
```

---

## Table of Contents

- [How it works](#how-it-works)
- [Quick start](#quick-start)
- [Configuration](#configuration)
- [Public API](#public-api)
- [Regions & messages](#regions--messages)
- [Auto-hide](#auto-hide)
- [Customizing texts](#customizing-texts)
- [Visual constructor](#visual-constructor)
- [Events](#events)
- [Legal context](#legal-context)
- [License](#license-1)

---

## How it works

```
User visits the site
        ‚îÇ
        ‚ñº
Already answered? ‚îÄ‚îÄyes‚îÄ‚îÄ‚ñ∂ show nothing
        ‚îÇ
        no
        ‚îÇ
        ‚ñº
Fetch ipapi.co (IP geolocation)
        ‚îÇ
   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îê
success    error
   ‚îÇ           ‚îÇ
   ‚ñº           ‚ñº
Country     Timezone
by IP       via Intl API
   ‚îÇ           ‚îÇ
   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        ‚îÇ
        ‚ñº
  Resolve region:
  RU/CIS  ‚Üí 152-FZ banner
  EU/EEA  ‚Üí GDPR banner
  US/CA   ‚Üí CCPA banner
  CN      ‚Üí Chinese banner
  other   ‚Üí default banner
        ‚îÇ
        ‚ñº
Show after 800ms delay
(smooth slide-up animation)
```

The user's answer is saved in `localStorage` (cookie fallback) and persists for **one year**. The banner will not appear again.

---

## Quick start

### Minimal setup

```html
<script src="cookie-consent.js"></script>
```

That's it. The library detects the region and shows the right banner automatically.

### With custom configuration

Declare `window.GeoConsentConfig` **before** the script tag:

```html
<script>
  window.GeoConsentConfig = {
    autoHide:    5000,           // auto-accept after 5 seconds
    theme:       'light',        // light theme
    accentColor: '#ff6b2b',      // orange accent
    position:    'bottom-left',  // bottom-left corner
    privacyUrl:  '/privacy',     // privacy policy URL
  };
</script>
<script src="cookie-consent.js"></script>
```

---

## Configuration

| Option | Type | Default | Description |
|---|---|---|---|
| `autoHide` | `false \| true \| number` | `null` | Auto-accept: `false` ‚Äî off, `true` ‚Äî region default delay, number ‚Äî delay in ms |
| `theme` | `'dark' \| 'light'` | `'dark'` | Color scheme |
| `accentColor` | `string` | `'#c8f135'` | Accent color (any CSS hex). Button text color is chosen automatically based on contrast |
| `position` | `string` | `'bottom-right'` | Position: `'bottom-right'`, `'bottom-left'`, `'bottom-center'` |
| `privacyUrl` | `string` | `'/privacy'` | Privacy policy page URL |
| `messages` | `object` | `{}` | Override texts per region (see below) |

---

## Public API

After the script loads, `window.GeoConsent` is available globally:

```js
// Force-show a banner for a specific region (great for testing)
GeoConsent.show('eu');
GeoConsent.show('ru');
GeoConsent.show('us');

// Reset the stored answer (banner will show again on next init)
GeoConsent.reset();

// Get the stored user answer
var answer = GeoConsent.getAnswer();
// ‚Üí { choice: "accepted", ts: 1709123456789 }
// ‚Üí null if the user hasn't answered yet

// Detect region without showing the banner
GeoConsent.detectRegion().then(function(region) {
  console.log(region); // 'ru' | 'eu' | 'us' | 'cn' | 'default'
});

// Update config at runtime (takes effect on next show)
GeoConsent.configure({
  accentColor: '#00d4ff',
  theme: 'light',
});

// Trigger manually (if you disabled auto-init)
GeoConsent.init();
```

### Disabling auto-init

If you need to control when the banner appears:

```html
<script>
  window.GeoConsentConfig = { autoInit: false };
</script>
<script src="cookie-consent.js"></script>

<script>
  // Show only after your own async setup is done
  someAsyncSetup().then(function() {
    GeoConsent.init();
  });
</script>
```

---

## Regions & messages

| Region | Countries | Banner type | Auto-hide |
|---|---|---|---|
| `ru` | Russia, Belarus, Kazakhstan, Uzbekistan and 8 more | Simple notice (152-FZ) | 8 sec |
| `eu` | 30 EU + EEA + UK | GDPR with "Necessary only" button | Off |
| `us` | USA, Canada | CCPA with "Do Not Sell My Info" | Off |
| `cn` | China | Simple notice (in Chinese) | 8 sec |
| `default` | Everyone else | Neutral English | Off |

### Region detection priority

**IP geolocation** (`ipapi.co`) ‚Üí **timezone** (`Intl.DateTimeFormat`) ‚Üí default.

The timezone fallback covers ~50 timezones and requires no network ‚Äî detection always works instantly, even when `ipapi.co` is unreachable.

---

## Auto-hide

Auto-hide closes the banner automatically after a delay if the user takes no action. The answer is stored as `"auto-accepted"`.

```js
window.GeoConsentConfig = {
  autoHide: false,    // disable for all regions
  autoHide: true,     // enable with each region's default delay
  autoHide: 10000,    // enable with a 10-second delay for all regions
};
```

> **Legal note.** Auto-accepting is technically at odds with the "specific and informed consent" principle of GDPR if cookies contain personal data. For the EU region, auto-hide is **disabled by default** ‚Äî don't enable it without consulting a lawyer.

---

## Customizing texts

Any region can be fully overridden via the `messages` config:

```js
window.GeoConsentConfig = {
  messages: {
    ru: {
      title:      '–ú—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º cookies',
      message:    '–ß—Ç–æ–±—ã —Å–∞–π—Ç —Ä–∞–±–æ—Ç–∞–ª –ª—É—á—à–µ. <a href="/privacy">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</a>.',
      btnAccept:  '–û–∫, –ø–æ–Ω—è—Ç–Ω–æ',
      btnDecline: '–ù–µ—Ç, —Å–ø–∞—Å–∏–±–æ',  // null ‚Äî hides the decline button
    },
    eu: {
      // Only override what you need ‚Äî defaults fill in the rest
      btnAccept: 'Accept all cookies',
    },
  }
};
```

The `message` and `detail` fields support HTML and the `{privacyUrl}` placeholder, which is automatically replaced with your configured URL:

```js
message: 'Details in our <a href="{privacyUrl}">privacy policy</a>.'
```

---

## Visual constructor

The package includes `cookie-consent-demo.html` ‚Äî a visual code generator.

**Features:**
- Instant live preview inside a mock browser on every change
- Switch between regions to check the copy
- Toggle auto-hide + delay slider
- Dark / light theme switch
- 6 accent color presets + color picker + manual HEX input
- 3 position options
- Privacy policy URL input
- Auto-generated embed code with a one-click copy button

To use it locally, open `cookie-consent-demo.html` in a browser. Both files should be in the same folder.

---

## Events

The library fires a custom event on `window` on every user response:

```js
window.addEventListener('geoconsent:answer', function(event) {
  console.log(event.detail.choice);
  // 'accepted'       ‚Äî clicked the primary button
  // 'declined'       ‚Äî clicked the decline button
  // 'auto-accepted'  ‚Äî banner closed by timer
});
```

Use this to conditionally load trackers:

```js
window.addEventListener('geoconsent:answer', function(e) {
  if (e.detail.choice === 'accepted') {
    loadGoogleAnalytics();
    loadMetaPixel();
  }
});
```

---

## Legal context

| Region | Regulator | Requirement | Auto-accept risk |
|---|---|---|---|
| üá∑üá∫ Russia | Roskomnadzor, 152-FZ | Notification of personal data processing | Low (fines up to ~$3k, almost no precedents for cookie banners) |
| üá™üá∫ Europe | DPAs, GDPR | Explicit informed consent | High (up to 4% of global turnover) |
| üá∫üá∏ USA | FTC, CCPA | Notice + right to opt out of data sale | Medium (varies by state) |
| üá®üá≥ China | CAC, PIPL | Notification | Low |

This library provides a technical implementation ‚Äî legal responsibility lies with the website owner. If you process personal data of EU residents, consulting a lawyer is strongly recommended.

---

## License

MIT ¬© 2026
